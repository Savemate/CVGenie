<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free Resume Builder - 9to5 University by MagTec Invest</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <i class="fas fa-university"></i>
                <span>9to5 University</span>
            </div>
            <ul class="nav-menu">
                <li><a href="index.html"><i class="fas fa-home"></i> Home</a></li>
                <li><a href="resume.html" class="active"><i class="fas fa-file-alt"></i> Resume Builder</a></li>
                <li><a href="rights.html"><i class="fas fa-gavel"></i> Workers Rights</a></li>
                <li><a href="courses.html"><i class="fas fa-graduation-cap"></i> Courses</a></li>
                <li><a href="contact.html"><i class="fas fa-envelope"></i> Contact</a></li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="resume-builder">
        <div class="builder-header">
            <h1><i class="fas fa-file-contract"></i> Free Professional Resume Builder</h1>
            <p class="subtitle">Create ATS-friendly resumes in minutes. No signup required. Brought to you by MagTec Invest.</p>
        </div>

        <!-- Progress Steps -->
        <div class="progress-steps">
            <div class="step active">
                <div class="step-number">1</div>
                <div class="step-label">Personal Info</div>
            </div>
            <div class="step">
                <div class="step-number">2</div>
                <div class="step-label">Experience</div>
            </div>
            <div class="step">
                <div class="step-number">3</div>
                <div class="step-label">Education</div>
            </div>
            <div class="step">
                <div class="step-number">4</div>
                <div class="step-label">Skills</div>
            </div>
            <div class="step">
                <div class="step-number">5</div>
                <div class="step-label">Download</div>
            </div>
        </div>

        <div class="resume-container">
            <!-- Form Side -->
            <div class="form-side">
                <div id="step-1" class="form-step active">
                    <h3><i class="fas fa-user"></i> Personal Information</h3>
                    <div class="form-group">
                        <label>Full Name *</label>
                        <input type="text" id="fullName" placeholder="Enter your full name">
                    </div>
                    <div class="form-group">
                        <label>Professional Title</label>
                        <input type="text" id="jobTitle" placeholder="e.g., Software Developer, Marketing Manager">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Email *</label>
                            <input type="email" id="email" placeholder="your.email@example.com">
                        </div>
                        <div class="form-group">
                            <label>Phone *</label>
                            <input type="tel" id="phone" placeholder="079 487 4559">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Location</label>
                        <input type="text" id="location" placeholder="City, Country">
                    </div>
                    <div class="form-group">
                        <label>Professional Summary</label>
                        <textarea id="summary" rows="4" placeholder="Briefly describe your experience, skills, and career goals..."></textarea>
                        <div class="char-count">Max 250 characters recommended</div>
                    </div>
                    <button class="btn-primary next-step" data-next="2">
                        Next: Experience <i class="fas fa-arrow-right"></i>
                    </button>
                </div>

                <div id="step-2" class="form-step">
                    <h3><i class="fas fa-briefcase"></i> Work Experience</h3>
                    <div class="experience-section">
                        <div class="experience-item">
                            <div class="form-group">
                                <label>Job Title *</label>
                                <input type="text" class="exp-title" placeholder="Software Developer">
                            </div>
                            <div class="form-group">
                                <label>Company Name *</label>
                                <input type="text" class="exp-company" placeholder="Tech Corporation">
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Start Date</label>
                                    <input type="text" class="exp-start" placeholder="Jan 2020">
                                </div>
                                <div class="form-group">
                                    <label>End Date</label>
                                    <input type="text" class="exp-end" placeholder="Present">
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Responsibilities & Achievements</label>
                                <textarea class="exp-desc" rows="3" placeholder="• Developed web applications
• Managed database systems
• Increased efficiency by 30%"></textarea>
                            </div>
                        </div>
                    </div>
                    <button class="btn-secondary" id="addExpBtn">
                        <i class="fas fa-plus"></i> Add Another Job
                    </button>
                    <div class="step-buttons">
                        <button class="btn-outline prev-step" data-prev="1">
                            <i class="fas fa-arrow-left"></i> Back
                        </button>
                        <button class="btn-primary next-step" data-next="3">
                            Next: Education <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>

                <div id="step-3" class="form-step">
                    <h3><i class="fas fa-graduation-cap"></i> Education</h3>
                    <div class="education-section">
                        <div class="education-item">
                            <div class="form-group">
                                <label>Institution Name *</label>
                                <input type="text" class="edu-school" placeholder="University of Technology">
                            </div>
                            <div class="form-group">
                                <label>Degree / Qualification</label>
                                <input type="text" class="edu-degree" placeholder="Bachelor of Science">
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Field of Study</label>
                                    <input type="text" class="edu-field" placeholder="Computer Science">
                                </div>
                                <div class="form-group">
                                    <label>Graduation Year</label>
                                    <input type="text" class="edu-year" placeholder="2020">
                                </div>
                            </div>
                        </div>
                    </div>
                    <button class="btn-secondary" id="addEduBtn">
                        <i class="fas fa-plus"></i> Add Another Education
                    </button>
                    <div class="step-buttons">
                        <button class="btn-outline prev-step" data-prev="2">
                            <i class="fas fa-arrow-left"></i> Back
                        </button>
                        <button class="btn-primary next-step" data-next="4">
                            Next: Skills <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>

                <div id="step-4" class="form-step">
                    <h3><i class="fas fa-star"></i> Skills & Expertise</h3>
                    <div class="form-group">
                        <label>Add Your Skills</label>
                        <div class="skills-input">
                            <input type="text" id="skillInput" placeholder="e.g., Project Management, JavaScript">
                            <button type="button" id="addSkillBtn" class="btn-small">Add</button>
                        </div>
                        <div class="skills-container" id="skillsList">
                            <span class="skill-tag">Communication <i class="fas fa-times"></i></span>
                            <span class="skill-tag">Teamwork <i class="fas fa-times"></i></span>
                            <span class="skill-tag">Problem Solving <i class="fas fa-times"></i></span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Languages</label>
                        <input type="text" id="languages" placeholder="English (Fluent), Afrikaans (Conversational)">
                    </div>
                    <div class="form-group">
                        <label>Certifications</label>
                        <input type="text" id="certifications" placeholder="PMP, AWS Certified, First Aid">
                    </div>
                    <div class="step-buttons">
                        <button class="btn-outline prev-step" data-prev="3">
                            <i class="fas fa-arrow-left"></i> Back
                        </button>
                        <button class="btn-primary" id="goToPreview">
                            Preview & Download <i class="fas fa-eye"></i>
                        </button>
                    </div>
                </div>

                <div id="step-5" class="form-step">
                    <h3><i class="fas fa-file-download"></i> Download Your Resume</h3>
                    <div class="template-selection">
                        <h4>Choose Template:</h4>
                        <div class="template-options">
                            <div class="template-option active" data-template="modern">
                                <div class="template-preview-small modern"></div>
                                <span>Modern</span>
                            </div>
                            <div class="template-option" data-template="classic">
                                <div class="template-preview-small classic"></div>
                                <span>Classic</span>
                            </div>
                            <div class="template-option" data-template="creative">
                                <div class="template-preview-small creative"></div>
                                <span>Creative</span>
                            </div>
                        </div>
                    </div>
                    <div class="download-options">
                        <button class="btn-primary" id="downloadPDF">
                            <i class="fas fa-file-pdf"></i> Download as PDF
                        </button>
                        <button class="btn-secondary" id="printResume">
                            <i class="fas fa-print"></i> Print Resume
                        </button>
                        <button class="btn-outline" id="saveForLater">
                            <i class="fas fa-save"></i> Save for Later
                        </button>
                    </div>
                    <div class="step-buttons">
                        <button class="btn-outline" id="editResume">
                            <i class="fas fa-edit"></i> Edit Resume
                        </button>
                    </div>
                </div>
            </div>

            <!-- Preview Side -->
            <div class="preview-side">
                <div class="preview-header">
                    <h3>Live Preview</h3>
                    <div class="preview-controls">
                        <button class="btn-small" id="refreshPreview">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                    </div>
                </div>
                <div class="preview-container">
                    <div class="resume-preview" id="resumePreview">
                        <!-- Resume will be generated here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Support Section -->
        <div class="support-section">
            <div class="support-card">
                <i class="fas fa-question-circle"></i>
                <h3>Need Help?</h3>
                <p>Contact MagTec Invest for support:</p>
                <p><i class="fas fa-phone"></i> 079 487 4559</p>
                <p><i class="fas fa-envelope"></i> magtecinvest@gmail.com</p>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3><i class="fas fa-university"></i> 9to5 University</h3>
                <p>A MagTec Invest Initiative</p>
                <p>Free career resources for everyone</p>
            </div>
            <div class="footer-section">
                <h4>Contact</h4>
                <p><i class="fas fa-envelope"></i> magtecinvest@gmail.com</p>
                <p><i class="fas fa-phone"></i> 079 487 4559</p>
                <p><i class="fab fa-whatsapp"></i> 079 487 4559</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2023 9to5 University. All rights reserved to MagTec Invest.</p>
        </div>
    </footer>

    <script>
        // Resume Builder - Working Version
        document.addEventListener('DOMContentLoaded', function() {
            let currentStep = 1;
            let selectedTemplate = 'modern';
            
            // Step Navigation
            document.querySelectorAll('.next-step').forEach(btn => {
                btn.addEventListener('click', function() {
                    const nextStep = parseInt(this.dataset.next);
                    if (validateStep(currentStep)) {
                        goToStep(nextStep);
                    }
                });
            });

            document.querySelectorAll('.prev-step').forEach(btn => {
                btn.addEventListener('click', function() {
                    const prevStep = parseInt(this.dataset.prev);
                    goToStep(prevStep);
                });
            });

            document.getElementById('goToPreview').addEventListener('click', function() {
                if (validateStep(4)) {
                    goToStep(5);
                    updatePreview();
                }
            });

            document.getElementById('editResume').addEventListener('click', function() {
                goToStep(1);
            });

            function goToStep(step) {
                // Hide all steps
                document.querySelectorAll('.form-step').forEach(s => s.classList.remove('active'));
                document.querySelectorAll('.progress-steps .step').forEach(s => s.classList.remove('active'));
                
                // Show selected step
                document.getElementById(`step-${step}`).classList.add('active');
                document.querySelector(`.progress-steps .step:nth-child(${step})`).classList.add('active');
                currentStep = step;
                
                // Update preview if on step 5
                if (step === 5) {
                    updatePreview();
                }
            }

            function validateStep(step) {
                switch(step) {
                    case 1:
                        const name = document.getElementById('fullName').value.trim();
                        const email = document.getElementById('email').value.trim();
                        const phone = document.getElementById('phone').value.trim();
                        
                        if (!name || !email || !phone) {
                            alert('Please fill in all required fields (Name, Email, Phone)');
                            return false;
                        }
                        if (!isValidEmail(email)) {
                            alert('Please enter a valid email address');
                            return false;
                        }
                        return true;
                    
                    default:
                        return true;
                }
            }

            function isValidEmail(email) {
                return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
            }

            // Add Experience
            document.getElementById('addExpBtn').addEventListener('click', function() {
                const expSection = document.querySelector('.experience-section');
                const newExp = expSection.querySelector('.experience-item').cloneNode(true);
                
                // Clear values
                newExp.querySelectorAll('input, textarea').forEach(input => {
                    input.value = '';
                });
                
                expSection.appendChild(newExp);
            });

            // Add Education
            document.getElementById('addEduBtn').addEventListener('click', function() {
                const eduSection = document.querySelector('.education-section');
                const newEdu = eduSection.querySelector('.education-item').cloneNode(true);
                
                // Clear values
                newEdu.querySelectorAll('input').forEach(input => {
                    input.value = '';
                });
                
                eduSection.appendChild(newEdu);
            });

            // Add Skills
            document.getElementById('addSkillBtn').addEventListener('click', addSkill);
            document.getElementById('skillInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') addSkill();
            });

            function addSkill() {
                const input = document.getElementById('skillInput');
                const skill = input.value.trim();
                const skillsList = document.getElementById('skillsList');
                
                if (skill && !Array.from(skillsList.children).some(tag => 
                    tag.textContent.includes(skill))) {
                    
                    const skillTag = document.createElement('span');
                    skillTag.className = 'skill-tag';
                    skillTag.innerHTML = `${skill} <i class="fas fa-times"></i>`;
                    
                    skillTag.querySelector('i').addEventListener('click', function() {
                        skillTag.remove();
                    });
                    
                    skillsList.appendChild(skillTag);
                    input.value = '';
                }
            }

            // Remove existing skills
            document.querySelectorAll('.skill-tag i').forEach(icon => {
                icon.addEventListener('click', function() {
                    this.parentElement.remove();
                });
            });

            // Template Selection
            document.querySelectorAll('.template-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.template-option').forEach(o => o.classList.remove('active'));
                    this.classList.add('active');
                    selectedTemplate = this.dataset.template;
                    updatePreview();
                });
            });

            // Update Preview
            document.getElementById('refreshPreview').addEventListener('click', updatePreview);

            function updatePreview() {
                const preview = document.getElementById('resumePreview');
                if (!preview) return;
                
                // Get all form data
                const resumeData = {
                    name: document.getElementById('fullName').value || 'Your Name',
                    title: document.getElementById('jobTitle').value || 'Professional Title',
                    email: document.getElementById('email').value || 'email@example.com',
                    phone: document.getElementById('phone').value || 'Phone Number',
                    location: document.getElementById('location').value || 'Location',
                    summary: document.getElementById('summary').value || 'Professional summary...',
                    skills: Array.from(document.querySelectorAll('#skillsList .skill-tag')).map(tag => 
                        tag.textContent.replace('×', '').trim()
                    ),
                    languages: document.getElementById('languages').value,
                    certifications: document.getElementById('certifications').value
                };

                // Get experience data
                resumeData.experience = [];
                document.querySelectorAll('.experience-item').forEach(item => {
                    const title = item.querySelector('.exp-title').value;
                    const company = item.querySelector('.exp-company').value;
                    if (title || company) {
                        resumeData.experience.push({
                            title: title || '',
                            company: company || '',
                            start: item.querySelector('.exp-start').value || '',
                            end: item.querySelector('.exp-end').value || '',
                            description: item.querySelector('.exp-desc').value || ''
                        });
                    }
                });

                // Get education data
                resumeData.education = [];
                document.querySelectorAll('.education-item').forEach(item => {
                    const school = item.querySelector('.edu-school').value;
                    const degree = item.querySelector('.edu-degree').value;
                    if (school || degree) {
                        resumeData.education.push({
                            school: school || '',
                            degree: degree || '',
                            field: item.querySelector('.edu-field').value || '',
                            year: item.querySelector('.edu-year').value || ''
                        });
                    }
                });

                // Generate HTML based on template
                let resumeHTML = '';
                if (selectedTemplate === 'classic') {
                    resumeHTML = generateClassicResume(resumeData);
                } else if (selectedTemplate === 'creative') {
                    resumeHTML = generateCreativeResume(resumeData);
                } else {
                    resumeHTML = generateModernResume(resumeData);
                }
                
                preview.innerHTML = resumeHTML;
            }

            function generateModernResume(data) {
                return `
                    <div class="resume-template modern">
                        <div class="resume-header">
                            <h1>${data.name}</h1>
                            <h2>${data.title}</h2>
                            <div class="contact-info">
                                <div><i class="fas fa-envelope"></i> ${data.email}</div>
                                <div><i class="fas fa-phone"></i> ${data.phone}</div>
                                <div><i class="fas fa-map-marker-alt"></i> ${data.location}</div>
                            </div>
                        </div>
                        
                        <div class="resume-section">
                            <h3><i class="fas fa-user"></i> PROFILE</h3>
                            <p>${data.summary}</p>
                        </div>
                        
                        ${data.experience.length > 0 ? `
                        <div class="resume-section">
                            <h3><i class="fas fa-briefcase"></i> EXPERIENCE</h3>
                            ${data.experience.map(exp => `
                                <div class="experience-item">
                                    <div class="job-title">${exp.title}</div>
                                    <div class="company">${exp.company}</div>
                                    <div class="date">${exp.start} - ${exp.end}</div>
                                    <div class="description">${formatDescription(exp.description)}</div>
                                </div>
                            `).join('')}
                        </div>
                        ` : ''}
                        
                        ${data.education.length > 0 ? `
                        <div class="resume-section">
                            <h3><i class="fas fa-graduation-cap"></i> EDUCATION</h3>
                            ${data.education.map(edu => `
                                <div class="education-item">
                                    <div class="degree">${edu.degree}</div>
                                    <div class="school">${edu.school}${edu.field ? ` - ${edu.field}` : ''}</div>
                                    <div class="year">${edu.year}</div>
                                </div>
                            `).join('')}
                        </div>
                        ` : ''}
                        
                        ${data.skills.length > 0 ? `
                        <div class="resume-section">
                            <h3><i class="fas fa-star"></i> SKILLS</h3>
                            <div class="skills-list">
                                ${data.skills.map(skill => `<span class="skill">${skill}</span>`).join(' ')}
                            </div>
                        </div>
                        ` : ''}
                    </div>
                `;
            }

            function formatDescription(text) {
                if (!text) return '';
                return text.split('\n')
                    .filter(line => line.trim())
                    .map(line => `<p>• ${line.trim()}</p>`)
                    .join('');
            }

            // Download PDF
            document.getElementById('downloadPDF').addEventListener('click', async function() {
                try {
                    const { jsPDF } = window.jspdf;
                    const doc = new jsPDF('p', 'mm', 'a4');
                    
                    // Get resume content
                    const resumeContent = document.getElementById('resumePreview').innerText;
                    
                    // Split content into pages
                    const lines = doc.splitTextToSize(resumeContent, 180);
                    
                    // Add content
                    doc.text(lines, 10, 10);
                    
                    // Save
                    const fileName = `${document.getElementById('fullName').value || 'resume'}_${Date.now()}.pdf`;
                    doc.save(fileName);
                    
                    alert('Resume downloaded successfully!');
                } catch (error) {
                    alert('Error generating PDF. Please try printing instead.');
                }
            });

            // Print Resume
            document.getElementById('printResume').addEventListener('click', function() {
                const printContent = document.getElementById('resumePreview').innerHTML;
                const printWindow = window.open('', '_blank');
                
                printWindow.document.write(`
                    <!DOCTYPE html>
                    <html>
                    <head>
                        <title>Print Resume - 9to5 University</title>
                        <style>
                            body { font-family: Arial, sans-serif; padding: 20mm; }
                            @media print {
                                body { padding: 0; }
                            }
                        </style>
                    </head>
                    <body>
                        ${printContent}
                        <script>
                            window.onload = function() {
                                window.print();
                                setTimeout(() => window.close(), 100);
                            };
                        <\/script>
                    </body>
                    </html>
                `);
                printWindow.document.close();
            });

            // Save for Later
            document.getElementById('saveForLater').addEventListener('click', function() {
                // Collect all data
                const resumeData = {
                    name: document.getElementById('fullName').value,
                    title: document.getElementById('jobTitle').value,
                    email: document.getElementById('email').value,
                    phone: document.getElementById('phone').value,
                    location: document.getElementById('location').value,
                    summary: document.getElementById('summary').value,
                    skills: Array.from(document.querySelectorAll('#skillsList .skill-tag')).map(tag => 
                        tag.textContent.replace('×', '').trim()
                    ),
                    template: selectedTemplate
                };
                
                localStorage.setItem('9to5_resume_draft', JSON.stringify(resumeData));
                alert('Resume saved! You can return anytime to continue editing.');
            });

            // Load saved draft
            const savedDraft = localStorage.getItem('9to5_resume_draft');
            if (savedDraft) {
                try {
                    const draft = JSON.parse(savedDraft);
                    
                    // Fill form with saved data
                    document.getElementById('fullName').value = draft.name || '';
                    document.getElementById('jobTitle').value = draft.title || '';
                    document.getElementById('email').value = draft.email || '';
                    document.getElementById('phone').value = draft.phone || '';
                    document.getElementById('location').value = draft.location || '';
                    document.getElementById('summary').value = draft.summary || '';
                    
                    // Clear existing skills and add saved ones
                    document.querySelectorAll('#skillsList .skill-tag').forEach(tag => tag.remove());
                    (draft.skills || []).forEach(skill => {
                        if (skill) {
                            const skillTag = document.createElement('span');
                            skillTag.className = 'skill-tag';
                            skillTag.innerHTML = `${skill} <i class="fas fa-times"></i>`;
                            skillTag.querySelector('i').addEventListener('click', function() {
                                skillTag.remove();
                            });
                            document.getElementById('skillsList').appendChild(skillTag);
                        }
                    });
                    
                    // Select saved template
                    if (draft.template) {
                        selectedTemplate = draft.template;
                        document.querySelectorAll('.template-option').forEach(option => {
                            option.classList.remove('active');
                            if (option.dataset.template === draft.template) {
                                option.classList.add('active');
                            }
                        });
                    }
                    
                    // Show success message
                    console.log('Loaded saved resume draft');
                } catch (e) {
                    console.log('No saved draft found');
                }
            }

            // Auto-save on input
            let saveTimeout;
            document.addEventListener('input', function() {
                clearTimeout(saveTimeout);
                saveTimeout = setTimeout(() => {
                    if (currentStep < 5) {
                        const name = document.getElementById('fullName').value;
                        if (name) {
                            const resumeData = {
                                name: name,
                                title: document.getElementById('jobTitle').value,
                                email: document.getElementById('email').value,
                                phone: document.getElementById('phone').value,
                                location: document.getElementById('location').value,
                                summary: document.getElementById('summary').value,
                                skills: Array.from(document.querySelectorAll('#skillsList .skill-tag')).map(tag => 
                                    tag.textContent.replace('×', '').trim()
                                ),
                                template: selectedTemplate
                            };
                            localStorage.setItem('9to5_resume_draft', JSON.stringify(resumeData));
                        }
                    }
                }, 1000);
            });

            // Initial preview
            updatePreview();
        });
    </script>
</body>
</html>